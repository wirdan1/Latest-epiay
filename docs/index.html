<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta id="api-description" name="description" content="Rest Api by Hookrest-Team">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link id="api-icon" rel="icon" href="/image/icon.png" type="image/png">
  <title id="api-title">Hookrest</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base Styles */
    :root {
      --primary-color: #2563eb;
      --secondary-color: #059669;
      --background-color: #f8fafc;
      --card-color: #ffffff;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --border-color: #e2e8f0;
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --post-color: #3b82f6;
      --get-color: #10b981;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      color: var(--text-primary);
      background-color: var(--background-color);
      line-height: 1.6;
    }

    /* Modern Card Styles */
    .card {
      background-color: var(--card-color);
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    /* Navigation */
    nav {
      background-color: var(--card-color);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border-color);
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 500;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: #1d4ed8;
      transform: translateY(-1px);
    }

    .btn-icon {
      padding: 8px;
      border-radius: 8px;
      background-color: var(--background-color);
      color: var(--text-secondary);
    }

    .btn-icon:hover {
      background-color: #e2e8f0;
      color: var(--text-primary);
    }

    /* API Method Badges */
    .method-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .method-get {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--get-color);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .method-post {
      background-color: rgba(59, 130, 246, 0.1);
      color: var(--post-color);
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    /* Input Fields */
    .input-field {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    /* Loader */
    .loader {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(37, 99, 235, 0.2);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 0.8s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      padding: 16px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-container {
      background-color: var(--card-color);
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: scale(0.9);
      transition: all 0.3s ease;
    }

    .modal-overlay.active .modal-container {
      transform: scale(1);
    }

    /* Response Box */
    .response-box {
      background-color: #f8fafc;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 16px;
      font-family: monospace;
      font-size: 13px;
      overflow-x: auto;
      max-height: 300px;
    }

    /* Utility Classes */
    .text-truncate {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Animation */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.3s ease forwards;
    }

    /* Layout Improvements */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
    }

    /* Grid System */
    .grid {
      display: grid;
      gap: 24px;
    }

    .grid-cols-1 {
      grid-template-columns: 1fr;
    }

    .grid-cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .grid-cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    @media (min-width: 768px) {
      .md\:grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .lg\:grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Category Navigation */
    .category-nav {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 8px 0 16px;
      scrollbar-width: thin;
    }

    .category-nav::-webkit-scrollbar {
      height: 4px;
    }

    .category-nav::-webkit-scrollbar-thumb {
      background-color: #cbd5e1;
      border-radius: 2px;
    }

    .category-tag {
      display: inline-flex;
      align-items: center;
      padding: 6px 12px;
      background-color: #f1f5f9;
      color: #64748b;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .category-tag:hover {
      background-color: #e2e8f0;
    }

    .category-tag.active {
      background-color: var(--primary-color);
      color: white;
    }

    /* API Endpoint Item */
    .endpoint-item {
      display: flex;
      flex-direction: column;
      padding: 16px;
      border-radius: 8px;
      background-color: var(--card-color);
      border: 1px solid var(--border-color);
      transition: all 0.2s ease;
      height: 100%;
    }

    .endpoint-item:hover {
      border-color: var(--primary-color);
      transform: translateY(-2px);
    }

    .endpoint-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .endpoint-method {
      flex-shrink: 0;
    }

    .endpoint-path {
      font-family: monospace;
      font-size: 14px;
      color: var(--text-primary);
      margin-left: 8px;
      word-break: break-all;
    }

    .endpoint-desc {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
      flex-grow: 1;
    }

    .endpoint-footer {
      display: flex;
      justify-content: flex-end;
    }

    /* Banner */
    .banner {
      position: relative;
      padding: 24px;
      margin-bottom: 24px;
      border-radius: 12px;
      background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
      color: white;
      overflow: hidden;
    }

    .banner::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      pointer-events: none;
    }

    .banner-content {
      position: relative;
      z-index: 1;
    }

    /* Search Box */
    .search-container {
      position: relative;
      margin-bottom: 24px;
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
    }

    .search-input {
      padding-left: 40px;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .container {
        padding: 0 12px;
      }
      
      .banner {
        padding: 20px;
      }
      
      .grid-cols-2,
      .grid-cols-3 {
        grid-template-columns: 1fr;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      :root {
        --background-color: #0f172a;
        --card-color: #1e293b;
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --border-color: #334155;
      }
      
      .btn-icon {
        background-color: #334155;
        color: #cbd5e1;
      }
      
      .btn-icon:hover {
        background-color: #475569;
        color: #f1f5f9;
      }
      
      .response-box {
        background-color: #1e293b;
      }
      
      .category-tag {
        background-color: #334155;
        color: #94a3b8;
      }
      
      .category-tag:hover {
        background-color: #475569;
      }
    }
  </style>
</head>

<body class="min-h-screen pt-16">
  <div id="page-loader" class="fixed inset-0 flex items-center justify-center bg-white z-50 transition-opacity duration-300">
    <div class="loader"></div>
  </div>
  
  <nav class="fixed top-0 left-0 right-0 py-3 px-4 z-40">
    <div class="container flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <span class="text-xl font-bold text-slate-800">Hookrest</span>
      </div>
      <div class="flex space-x-2">
        <a id="api-info" target="_blank" class="btn btn-icon">
          <span class="material-icons text-base">info</span>
        </a>
        <a href="/docs/obfus.html" target="_blank" class="btn btn-icon" title="JavaScript Obfuscator">
          <span class="material-icons text-base">code</span>
        </a>
        <a href="https://danz-lovat.vercel.app/" target="_blank" class="btn btn-icon" title="Download YouTube Video/Audio">
          <span class="material-icons text-base">download</span>
        </a>
      </div>
    </div>
  </nav>

  <main class="container py-6">
    <div class="banner card border-0">
      <div class="banner-content">
        <div class="flex flex-wrap items-center gap-2 mb-3">
          <h1 id="api-name" class="text-2xl font-bold text-white">Name</h1>
          <div id="api-author" class="bg-white bg-opacity-20 text-white text-xs font-medium px-3 py-1 rounded-full">by Who.</div>
        </div>
        <p id="api-desc" class="text-sm text-blue-100 mb-4">Desc</p>
        <div id="api-links" class="flex flex-col gap-2 text-sm text-blue-100"></div>
        <div class="mt-6 pt-4 border-t border-blue-300 border-opacity-30 flex justify-between items-center">
          <span id="api-copyright" class="text-xs text-blue-200">© 2025 Name. All rights reserved.</span>
          <a href="https://github.com/shinzxyz" target="_blank" class="flex items-center text-blue-200 hover:text-white transition-colors text-xs">
            <i class="fab fa-github mr-2"></i>
            <span class="font-medium">Github</span>
          </a>
        </div>
      </div>
    </div>

    <div class="search-container">
      <div class="relative">
        <span class="search-icon material-icons">search</span>
        <input type="text" id="api-search" class="input-field search-input" placeholder="Search API endpoints...">
      </div>
    </div>

    <div class="category-nav-container mb-6">
      <div class="category-nav">
        <span class="category-tag active" data-category="all">ALL</span>
        <!-- Category tags will be added dynamically -->
      </div>
    </div>

    <div id="api-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
  </main>

  <div id="api-modal" class="modal-overlay">
    <div class="modal-container card">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <div class="flex items-center">
            <span id="api-method" class="method-badge method-get mr-2">GET</span>
            <h3 class="text-lg font-semibold" id="modal-title">API Request</h3>
          </div>
          <button id="close-modal" class="btn btn-icon">
            <span class="material-icons text-base">close</span>
          </button>
        </div>
        <p id="api-description" class="text-sm text-slate-600 mb-5">API description will appear here</p>
        
        <div id="params-container" class="space-y-4 mb-5"></div>
        
        <button id="submit-api" class="btn btn-primary w-full">Send Request</button>
        
        <div id="response-container" class="mt-6 hidden">
          <div class="flex items-center justify-between mb-3">
            <h4 class="text-sm font-medium">Response</h4>
            <div class="flex items-center">
              <span id="response-status" class="method-badge method-get mr-2">200</span>
              <span id="response-time" class="text-xs text-slate-500">200ms</span>
            </div>
          </div>
          <div id="response-data" class="response-box"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // JavaScript code remains exactly the same as in the original
    document.addEventListener("DOMContentLoaded", async function() {
      document.body.classList.add("noscroll");
      hideLoader();
      try {
        const endpoints = await (await fetch("/endpoints")).json();
        const set = await (await fetch("/set")).json();
        setContent("api-icon", "href", set.icon);
        setContent("api-title", "textContent", set.name.main);
        setContent("api-description", "content", set.description);
        setContent("api-name", "textContent", set.name.main);
        setContent("api-author", "textContent", `by ${set.author}`);
        setContent("api-desc", "textContent", set.description);
        setContent("api-copyright", "textContent", `© 2025 ${set.name.copyright}. All rights reserved.`);
        setContent("api-info", "href", set.info_url);
        setupApiLinks(set);
        setupApiContent(endpoints);
        setupApiButtonHandlers(endpoints);
        setupSearchFunctionality();
      } catch (error) {
        console.error("Error loading configuration:", error);
      }

      function setContent(id, property, value) {
        const element = document.getElementById(id);
        if (element) element[property] = value;
      }

      function setupApiLinks(gtw) {
        const apiLinksContainer = document.getElementById("api-links");
        apiLinksContainer.innerHTML = "";
        if (apiLinksContainer && gtw.links?.length) {
          gtw.links.forEach(link => {
            const linkContainer = document.createElement("div");
            linkContainer.className = "flex items-center gap-2";
            const bulletPoint = document.createElement("div");
            bulletPoint.className = `w-2 h-2 bg-blue-200 rounded-full`;
            const linkElement = document.createElement("a");
            linkElement.href = link.url;
            linkElement.textContent = link.name;
            linkElement.className = "hover:underline";
            linkElement.target = "_blank";
            linkContainer.appendChild(bulletPoint);
            linkContainer.appendChild(linkElement);
            apiLinksContainer.appendChild(linkContainer);
          });
        }
      }
      
      const pageLoader = document.getElementById("page-loader");
      window.addEventListener("load", function() {
        setTimeout(function() {
          const scrollPosition = parseInt(document.body.style.top || "0") * -1;
          document.body.classList.remove("noscroll");
          document.body.style.top = "";
          window.scrollTo(0, scrollPosition);
          pageLoader.style.opacity = "0";
          setTimeout(function() {
            pageLoader.style.display = "none";
          }, 800);
        }, 1e3);
      });

      function showLoader() {
        const scrollPosition = window.scrollY;
        document.body.style.top = `-${scrollPosition}px`;
        document.body.classList.add("noscroll");
        pageLoader.style.display = "flex";
        pageLoader.style.opacity = "1";
      }

      function hideLoader() {
        setTimeout(function() {
          const scrollPosition = parseInt(document.body.style.top || "0") * -1;
          document.body.classList.remove("noscroll");
          document.body.style.top = "";
          window.scrollTo(0, scrollPosition);
          pageLoader.style.opacity = "0";
          setTimeout(function() {
            pageLoader.style.display = "none";
          }, 800);
        }, 1e3);
      }

      function setupApiContent(gtw) {
        const apiContent = document.getElementById("api-content");
        apiContent.innerHTML = "";
        const categoryNavContainer = document.querySelector(".category-nav-container");
        const categoryNav = document.querySelector(".category-nav");
        
        // Clear existing category tags except "ALL"
        const allCategory = categoryNav.querySelector('[data-category="all"]');
        categoryNav.innerHTML = "";
        categoryNav.appendChild(allCategory);
        
        const categories = [...new Set(gtw.endpoints.map(cat => cat.name))];
        categories.forEach(category => {
          const categoryTag = document.createElement("span");
          categoryTag.className = "category-tag";
          categoryTag.textContent = category.toUpperCase();
          categoryTag.dataset.category = category.toLowerCase();
          categoryNav.appendChild(categoryTag);
        });
        
        renderEndpoints(gtw.endpoints, "all");
        
        categoryNav.addEventListener("click", function(e) {
          if (e.target.classList.contains("category-tag")) {
            document.querySelectorAll(".category-tag").forEach(tag => {
              tag.classList.remove("active");
            });
            e.target.classList.add("active");
            const category = e.target.dataset.category;
            renderEndpoints(gtw.endpoints, category);
            e.target.scrollIntoView({
              behavior: "smooth",
              block: "nearest",
              inline: "center"
            });
          }
        });
      }

      function renderEndpoints(endpoints, selectedCategory) {
        const apiContent = document.getElementById("api-content");
        apiContent.innerHTML = "";
        
        endpoints.forEach(category => {
          if (selectedCategory !== "all" && category.name.toLowerCase() !== selectedCategory) {
            return;
          }
          
          const categoryTitle = document.createElement("h2");
          categoryTitle.className = "text-xl font-semibold mb-4 col-span-full mt-6 first:mt-0";
          categoryTitle.textContent = category.name;
          
          const countSpan = document.createElement("span");
          countSpan.className = "ml-2 bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full";
          countSpan.textContent = Object.keys(category.items).length;
          categoryTitle.appendChild(countSpan);
          
          apiContent.appendChild(categoryTitle);
          
          const endpointsContainer = document.createElement("div");
          endpointsContainer.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 col-span-full mb-8";
          
          const sortedItems = Object.entries(category.items).sort(([, a], [, b]) => (a.name || "").localeCompare(b.name || "")).map(([, item]) => item);
          
          sortedItems.forEach(itemData => {
            const itemName = Object.keys(itemData)[0];
            const item = itemData[itemName];
            const itemElement = createApiItemElement(itemName, item);
            endpointsContainer.appendChild(itemElement);
          });
          
          apiContent.appendChild(endpointsContainer);
        });
      }

      function createApiItemElement(itemName, item) {
        const itemDiv = document.createElement("div");
        itemDiv.className = "endpoint-item fade-in";
        itemDiv.dataset.name = itemName || "";
        itemDiv.dataset.desc = item.desc || "";
        
        const headerDiv = document.createElement("div");
        headerDiv.className = "endpoint-header";
        
        const method = document.createElement("span");
        method.className = `method-badge ${item.method === 'POST' ? 'method-post' : 'method-get'}`;
        method.textContent = item.method || "GET";
        
        const path = document.createElement("span");
        path.className = "endpoint-path text-truncate";
        path.textContent = item.path;
        
        headerDiv.appendChild(method);
        headerDiv.appendChild(path);
        
        const title = document.createElement("h4");
        title.className = "text-md font-semibold mb-2";
        title.textContent = itemName || "Unnamed Item";
        
        const description = document.createElement("p");
        description.className = "endpoint-desc";
        description.textContent = item.desc || "No description";
        
        const button = document.createElement("button");
        button.className = "btn btn-primary";
        button.dataset.apiPath = item.path || "";
        button.dataset.apiName = itemName || "";
        button.dataset.apiDesc = item.desc || "";
        button.textContent = "Try it";
        
        itemDiv.appendChild(headerDiv);
        itemDiv.appendChild(title);
        itemDiv.appendChild(description);
        itemDiv.appendChild(button);
        
        return itemDiv;
      }

      function openApiModal(name, endpoint, description, method) {
        const modal = document.getElementById("api-modal");
        const closeModalBtn = document.getElementById("close-modal");
        const submitApiBtn = document.getElementById("submit-api");
        const modalTitle = document.getElementById("modal-title");
        const apiMethod = document.getElementById("api-method");
        const apiDescription = document.getElementById("api-description");
        const paramsContainer = document.getElementById("params-container");
        const responseContainer = document.getElementById("response-container");
        const responseData = document.getElementById("response-data");
        const responseStatus = document.getElementById("response-status");
        const responseTime = document.getElementById("response-time");
        
        const existingUrlDisplay = document.querySelector(".urlDisplay");
        if (existingUrlDisplay) existingUrlDisplay.remove();
        
        responseContainer.classList.add("hidden");
        responseData.innerHTML = "";
        submitApiBtn.classList.remove("hidden");
        paramsContainer.classList.remove("hidden");
        paramsContainer.innerHTML = "";
        
        modalTitle.textContent = name;
        apiDescription.textContent = description;
        apiMethod.textContent = method || "GET";
        apiMethod.className = `method-badge ${method === 'POST' ? 'method-post' : 'method-get'} mr-2`;
        
        const apiKeyField = document.createElement("div");
        apiKeyField.innerHTML = `
          <label class="block text-sm font-medium text-slate-700 mb-1">API Key</label>
          <input type="text" id="param-apikey" class="input-field" value="yoedzx" placeholder="Enter your API key">
          <div id="error-apikey" class="text-red-500 text-xs mt-1 hidden">API key is required</div>
        `;
        paramsContainer.appendChild(apiKeyField);
        
        const url = new URL(endpoint, window.location.origin);
        const urlParams = url.search ? url.search.substring(1).split("&") : [];
        
        urlParams.forEach(param => {
          const [key] = param.split("=");
          if (key && key !== "apikey") {
            const isOptional = key.startsWith("_");
            const paramField = document.createElement("div");
            paramField.innerHTML = `
              <label class="block text-sm font-medium text-slate-700 mb-1">${key.capitalize()}</label>
              <input type="text" id="param-${key}" class="input-field" placeholder="Enter ${key}${isOptional ? " (optional)" : ""}">
              <div id="error-${key}" class="text-red-500 text-xs mt-1 hidden">This field is required</div>
            `;
            paramsContainer.appendChild(paramField);
          }
        });
        
        // Show modal
        modal.classList.add("active");
        document.body.classList.add("noscroll");
        
        const closeModal = function() {
          modal.classList.remove("active");
          document.body.classList.remove("noscroll");
        };
        
        closeModalBtn.onclick = closeModal;
        modal.addEventListener("click", function(event) {
          if (event.target === modal) {
            closeModal();
          }
        });
        
        document.addEventListener("keydown", function(event) {
          if (event.key === "Escape") {
            closeModal();
          }
        }, { once: true });
        
        submitApiBtn.onclick = async function() {
          let isValid = true;
          const apiKeyInput = document.getElementById("param-apikey");
          const apiKeyError = document.getElementById("error-apikey");
          
          if (!apiKeyInput.value.trim()) {
            isValid = false;
            apiKeyError.classList.remove("hidden");
            apiKeyInput.classList.add("border-red-500");
          } else {
            apiKeyError.classList.add("hidden");
            apiKeyInput.classList.remove("border-red-500");
          }
          
          if (!isValid) return;
          
          responseContainer.classList.remove("hidden");
          paramsContainer.classList.add("hidden");
          submitApiBtn.classList.add("hidden");
          
          const startTime = Date.now();
          
          try {
            let apiUrl = endpoint;
            const separator = apiUrl.includes("?") ? "&" : "?";
            apiUrl = `${apiUrl}${separator}apikey=${encodeURIComponent(apiKeyInput.value.trim())}`;
            
            const paramInputs = paramsContainer.querySelectorAll("input");
            paramInputs.forEach(input => {
              const key = input.id.replace("param-", "");
              const value = input.value.trim();
              if (key !== "apikey" && value !== "") {
                apiUrl += `&${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
              }
            });
            
            const requestOptions = {
              method: "GET",
              headers: {
                "Content-Type": "application/json"
              }
            };
            
            const response = await fetch(apiUrl, requestOptions);
            const endTime = Date.now();
            const duration = endTime - startTime;
            
            responseStatus.textContent = response.status;
            responseStatus.className = response.ok ? "method-badge method-get mr-2" : "method-badge method-post mr-2";
            responseTime.textContent = `${duration}ms`;
            
            if (!response.ok) {
              const errorData = await response.json();
              throw new Error(errorData.message || "API request failed");
            }
            
            const contentType = response.headers.get("content-type");
            if (contentType && contentType.includes("application/json")) {
              const jsonData = await response.json();
              responseData.textContent = JSON.stringify(jsonData, null, 2);
            } else {
              const text = await response.text();
              responseData.textContent = text;
            }
          } catch (error) {
            const endTime = Date.now();
            const duration = endTime - startTime;
            
            responseStatus.textContent = "Error";
            responseStatus.className = "method-badge method-post mr-2";
            responseTime.textContent = `${duration}ms`;
            
            responseData.innerHTML = `
              <div class="p-3 bg-red-50 border-l-4 border-red-500 rounded">
                <div class="flex items-center">
                  <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div class="ml-3">
                    <p class="text-sm text-red-700">
                      ${error.message || "Invalid API key - please use ?apikey=yoedzx"}
                    </p>
                  </div>
                </div>
              </div>
            `;
          }
        };
      }

      function setupApiButtonHandlers(gtw) {
        document.addEventListener("click", event => {
          if (event.target.classList.contains("btn-primary") && event.target.dataset.apiPath) {
            const { apiPath, apiName, apiDesc } = event.target.dataset;
            const currentItem = gtw.endpoints.flatMap(category => Object.values(category.items))
              .map(itemData => {
                const itemName = Object.keys(itemData)[0];
                return { name: itemName, ...itemData[itemName] };
              })
              .find(item => item.path === apiPath && item.name === apiName);
            
            openApiModal(apiName, apiPath, apiDesc, currentItem?.method);
          }
        });
      }

      function setupSearchFunctionality() {
        const searchInput = document.getElementById("api-search");
        if (!searchInput) return;
        
        let originalEndpoints = null;
        let currentCategory = "all";
        
        document.querySelector(".category-nav").addEventListener("click", function(e) {
          if (e.target.classList.contains("category-tag")) {
            currentCategory = e.target.dataset.category;
            if (searchInput.value.trim()) {
              searchInput.dispatchEvent(new Event("input"));
            }
          }
        });

        function captureOriginalData() {
          const categories = document.querySelectorAll("#api-content > div");
          const result = [];
          
          categories.forEach(category => {
            if (category.classList.contains("col-span-full")) {
              const categoryName = category.querySelector("h2").textContent.toLowerCase();
              const endpointsGrid = category.nextElementSibling;
              
              const items = Array.from(endpointsGrid.querySelectorAll(".endpoint-item")).map(item => {
                return {
                  element: item.cloneNode(true),
                  name: item.dataset.name,
                  desc: item.dataset.desc,
                  category: categoryName
                };
              });
              
              result.push({
                categoryElement: category,
                categoryName: categoryName,
                endpointsGrid: endpointsGrid,
                items: items
              });
            }
          });
          
          return result;
        }

        function restoreOriginalData() {
          if (!originalEndpoints) return;
          
          const apiContent = document.getElementById("api-content");
          apiContent.innerHTML = "";
          
          originalEndpoints.forEach(categoryData => {
            if (currentCategory === "all" || categoryData.categoryName === currentCategory) {
              apiContent.appendChild(categoryData.categoryElement);
              apiContent.appendChild(categoryData.endpointsGrid);
            }
          });
        }
        
        searchInput.addEventListener("input", function(e) {
          const searchTerm = e.target.value.toLowerCase().trim();
          
          if (!originalEndpoints) {
            originalEndpoints = captureOriginalData();
          }
          
          if (!searchTerm) {
            restoreOriginalData();
            return;
          }
          
          const apiContent = document.getElementById("api-content");
          apiContent.innerHTML = "";
          
          originalEndpoints.forEach(categoryData => {
            const shouldShowCategory = currentCategory === "all" || categoryData.categoryName === currentCategory;
            
            if (!shouldShowCategory) return;
            
            const visibleItems = categoryData.items.filter(item => {
              const title = item.name?.toLowerCase() || "";
              const desc = item.desc?.toLowerCase() || "";
              return title.includes(searchTerm) || desc.includes(searchTerm);
            });
            
            if (visibleItems.length === 0) return;
            
            // Add category title
            const categoryTitle = categoryData.categoryElement.cloneNode(true);
            apiContent.appendChild(categoryTitle);
            
            // Add endpoints container
            const endpointsContainer = document.createElement("div");
            endpointsContainer.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 col-span-full mb-8";
            
            visibleItems.forEach(item => {
              endpointsContainer.appendChild(item.element.cloneNode(true));
            });
            
            apiContent.appendChild(endpointsContainer);
          });
        });
      }

      // Helper function for capitalizing strings
      String.prototype.capitalize = function() {
        return this.charAt(0).toUpperCase() + this.slice(1);
      };
    });
  </script>
</body>

</html>
